# webpack 常见面试题

## 面试官系列

- [说说你对webpack的理解?解决了什么问题?](/interview/webpack/webpack_1)
- [说说webpack的构建流程?](/interview/webpack/webpack_2)
- [说说webpack中常见的Loader?解决了什么问题?](/interview/webpack/webpack_3)
- [说说webpack中常见的Plugin?解决了什么问题?](/interview/webpack/webpack_4)
- [说说Loader和Plugin的区别?编写Loader, Plugin的思路?](/interview/webpack/webpack_5)
- [说说webpack的热更新是如何做到的?原理是什么?](/interview/webpack/webpack_6)
- [说说webpack proxy工作原理?为什么能解决跨域?](/interview/webpack/webpack_7)
- [说说如何借助webpack来优化前端性能?](/interview/webpack/webpack_8)
- [如何提高webpack的构建速度?](/interview/webpack/webpack_9)
- [webpack类似的工具还有哪些?区别?](/interview/webpack/webpack_10)

## 1.webpack的工作原理?

WebPack可以看做是模块打包机: 它做的事情是, 分析你的项目结构, 找到JavaScript模块以及其它的一些浏览器不能直接运行的拓展语言(Sass, TypeScript等), 并将其转换和打包为合适的格式供浏览器使用。在3.0出现后, Webpack还肩负起了优化项目的责任。

---

## 3.Webpack的基本功能有哪些?

- 代码转换: TypeScript 编译成 JavaScript、SCSS 编译成 CSS 等等
- 文件优化: 压缩 JavaScript、CSS、html 代码, 压缩合并图片等
- 代码分割: 提取多个页面的公共代码、提取首屏不需要执行部分的代码让其异步加载
- 模块合并: 在采用模块化的项目有很多模块和文件, 需要构建功能把模块分类合并成一个文件
- 自动刷新: 监听本地源代码的变化, 自动构建, 刷新浏览器
- 代码校验: 在代码被提交到仓库前需要检测代码是否符合规范, 以及单元测试是否通过
- 自动发布: 更新完代码后, 自动构建出线上发布代码并传输给发布系统。

---

## 4.gulp/grunt 与 webpack的区别是什么?

三者都是前端构建工具, grunt和gulp在早期比较流行, 现在webpack相对来说比较主流, 不过一些轻量化的任务还是会用gulp来处理, 比如单独打包CSS文件等。
grunt和gulp是基于任务和流(Task、Stream)的。
类似jQuery, 找到一个(或一类)文件, 对其做一系列链式操作, 更新流上的数据,  整条链式操作构成了一个任务, 多个任务就构成了整个web的构建流程。

webpack是基于入口的。
webpack会自动地递归解析入口所需要加载的所有资源文件, 然后用不同的Loader来处理不同的文件, 用Plugin来扩展webpack功能。

---

## 5.webpack是解决什么问题而生的?

如果像以前开发时一个html文件可能会引用十几个js文件,而且顺序还不能乱, 因为它们存在依赖关系, 同时对于ES6+等新的语法, less, sass等CSS预处理都不能很好的解决……, 此时就需要一个处理这些问题的工具。

---

## 8.前端为什么要进行打包和构建?

代码层面: 

- 体积更小(Tree-shaking、压缩、合并), 加载更快
- 编译高级语言和语法(TS、ES6、模块化、scss)
- 兼容性和错误检查(polyfill,postcss,eslint)

研发流程层面: 

- 统一、高效的开发环境
- 统一的构建流程和产出标准
- 集成公司构建规范(提测、上线)

---

## 9.webpack的构建流程是什么?从读取配置到输出文件这个过程尽量说全。

Webpack 的运行流程是一个串行的过程, 从启动到结束会依次执行以下流程: 

- 初始化参数: 从配置文件和 Shell 语句中读取与合并参数, 得出最终的参数；
- 开始编译: 用上一步得到的参数初始化 Compiler 对象, 加载所有配置的插件, 执行对象的 run 方法开始执行编译；
- 确定入口: 根据配置中的 entry 找出所有的入口文件；
- 编译模块: 从入口文件出发, 调用所有配置的 Loader 对模块进行翻译, 再找出该模块依赖的模块, 再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理；
- 完成模块编译: 在经过第4步使用 Loader 翻译完所有模块后, 得到了每个模块被翻译后的最终内容以及它们之间的依赖关系；
- 输出资源: 根据入口和模块之间的依赖关系, 组装成一个个包含多个模块的 Chunk, 再把每个 Chunk 转换成一个单独的文件加入到输出列表, 这步是可以修改输出内容的最后机会；
- 输出完成: 在确定好输出内容后, 根据配置确定输出的路径和文件名, 把文件内容写入到文件系统。

在以上过程中, Webpack 会在特定的时间点广播出特定的事件, 插件在监听到感兴趣的事件后会执行特定的逻辑, 并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果。

---

## 13.什么是bundle, 什么是chunk, 什么是module

- `bundle`: 是由webpack打包出来的文件
- `chunk`: 是指webpack在进行模块依赖分析的时候, 代码分割出来的代码块
- `module`: 是开发中的单个模块

---

## 14.ExtractTextPlugin插件的作用

`ExtractTextPlugin`插件的作用是提取出 JavaScript 代码里的 CSS 到一个单独的文件。
对此你可以通过插件的filename属性, 告诉插件输出的 CSS 文件名称是通过`[name]_[contenthash:8].css`字符串模版生成的, 里面的`[name]`代表文件名称, `[contenthash:8]`代表根据文件内容算出的8位 hash 值,  还有很多配置选项可以在`ExtractTextPlugin`的主页上查到。

---

## 15.什么是模热更新?有什么优点?

模块热更新是webpack的一个功能, 它可以使得代码修改之后, 不用刷新浏览器就可以更新。

在应用过程中替换添加删出模块, 无需重新加载整个页面, 是高级版的自动刷新浏览器。

优点: 只更新变更内容, 以节省宝贵的开发时间。调整样式更加快速, 几乎相当于在浏览器中更改样式

---

## 16.什么是长缓存?在webpack中如何做到长缓存优化?

浏览器在用户访问页面的时候, 为了加快加载速度, 会对用户访问的静态资源进行存储, 但是每一次代码升级或者更新, 都需要浏览器去下载新的代码, 最方便和最简单的更新方式就是引入新的文件名称。
在webpack中, 可以在output给出输出的文件制定chunkhash, 并且分离经常更新的代码和框架代码, 通过`NameModulesPlugin`或者`HashedModulesPlugin`使再次打包文件名不变。

---

## 17.webpack怎么配置

主要配置5个核心文件

1. mode: 通过选择 `development`, `production` 或 `none` 之中的一个, 来设置 `mode` 参数, 你可以启用 webpack 内置在相应环境下的优化。

2. entry: **入口起点(entry point)** 指示 webpack 应该使用哪个模块, 来作为构建其内部 [依赖图(dependency graph)](https://webpack.docschina.org/concepts/dependency-graph/) 的开始。进入入口起点后, webpack 会找出有哪些模块和库是入口起点(直接和间接)依赖的。

3. output: **output** 属性告诉 webpack 在哪里输出它所创建的 *bundle*, 以及如何命名这些文件。主要输出文件的默认值是 `./dist/main.js`, 其他生成文件默认放置在 `./dist` 文件夹中。

4. loader: webpack 只能理解 JavaScript 和 JSON 文件, 这是 webpack 开箱可用的自带能力。**loader** 让 webpack 能够去处理其他类型的文件, 并将它们转换为有效 [模块](https://webpack.docschina.org/concepts/modules), 以供应用程序使用, 以及被添加到依赖图中。

5. plugin: loader 用于转换某些类型的模块, 而插件则可以用于执行范围更广的任务。包括: 打包优化, 资源管理, 注入环境变量。

---
